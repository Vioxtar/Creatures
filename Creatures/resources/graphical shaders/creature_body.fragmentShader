#version 460 core

in vec4 oVertexColor;
in float oVertexSquaredDistance;
in float oLife;
in vec2 oSkinPattern;

out vec4 FragColor;
out float gl_FragDepth;

void main()
{
    FragColor = oVertexColor * (mod(oVertexSquaredDistance, oSkinPattern.x) > oSkinPattern.y ? 1.1 : 1.0);

    FragColor.a = max(pow(oVertexSquaredDistance, (1.0 - oLife) * 2.0), oLife);
    FragColor.a *= 0.975; // Still make everything ever so slightly transparent

    gl_FragDepth = oVertexSquaredDistance;
}
